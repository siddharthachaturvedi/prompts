<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompts — Siddhartha Chaturvedi</title>
    <meta name="description"
        content="Curated system prompts for PM, OB, and prompt engineering. Copy or launch directly in ChatGPT, Claude, or Gemini.">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --washi: #F2F0E9;
            --ink: #1A1A1A;
            --ink-light: #666;
            --vermillion: #E34234;
            --line: #D4D2CC;
            --paper-texture: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            --font-primary: 'Inter', -apple-system, system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: var(--font-primary);
            font-size: 16px;
            line-height: 1.6;
            color: var(--ink);
            background: var(--washi);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background-image: var(--paper-texture);
            pointer-events: none;
            z-index: 50;
            opacity: 0.4;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--washi);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--ink);
        }

        a {
            color: var(--vermillion);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* ═══════════ HEADER ═══════════ */
        .header {
            border-bottom: 1px solid var(--ink);
            position: sticky;
            top: 0;
            z-index: 20;
            background: var(--washi);
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 clamp(1.25rem, 4vw, 3rem);
            display: flex;
            align-items: center;
            height: 56px;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.625rem;
            text-decoration: none;
            color: var(--ink);
            flex-shrink: 0;
        }

        .logo:hover {
            text-decoration: none;
        }

        .logo-dot {
            width: 10px;
            height: 10px;
            background: var(--vermillion);
            border-radius: 50%;
        }

        .logo-text {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .header-right {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 1.25rem;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .header-link {
            color: var(--ink-light);
            text-decoration: none;
        }

        .header-link:hover {
            color: var(--ink);
            text-decoration: none;
        }

        /* ═══════════ INDEX VIEW ═══════════ */
        .view {
            display: none;
            flex: 1;
        }

        .view.active {
            display: flex;
            flex-direction: column;
        }

        .index-hero {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: clamp(2rem, 5vw, 4rem) clamp(1.25rem, 4vw, 3rem);
        }

        .index-title {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 0.75rem;
        }

        .index-subtitle {
            font-size: 1rem;
            color: var(--ink-light);
            max-width: 520px;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .search-wrap {
            max-width: 400px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid var(--ink);
            background: transparent;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--ink);
            outline: none;
        }

        .search-input:focus {
            box-shadow: 3px 3px 0 var(--vermillion);
        }

        .search-input::placeholder {
            color: var(--ink-light);
        }

        .search-icon {
            position: absolute;
            left: 0.875rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--ink-light);
            pointer-events: none;
        }

        /* Card grid */
        .card-grid {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: 0 clamp(1.25rem, 4vw, 3rem) clamp(2rem, 4vw, 3rem);
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1px;
            background: var(--ink);
            border: 1px solid var(--ink);
        }

        .card {
            background: var(--washi);
            padding: 1.5rem;
            cursor: pointer;
            transition: background 0.15s;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .card:hover {
            background: #EDEAE3;
        }

        .card-top {
            display: flex;
            align-items: center;
            gap: 0.625rem;
        }

        .card-number {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--washi);
            background: var(--ink);
            width: 1.75rem;
            height: 1.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .card-by {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--ink-light);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-left: auto;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: -0.01em;
            line-height: 1.3;
        }

        .card-preview {
            font-size: 0.8rem;
            color: var(--ink-light);
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-arrow {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--vermillion);
            margin-top: auto;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .no-results {
            background: var(--washi);
            padding: 3rem;
            text-align: center;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--ink-light);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            grid-column: 1 / -1;
        }

        /* ═══════════ DETAIL VIEW ═══════════ */
        .detail-nav {
            border-bottom: 1px solid var(--ink);
        }

        .detail-nav-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 clamp(1.25rem, 4vw, 3rem);
            display: flex;
            align-items: stretch;
            min-height: 48px;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0 1.25rem 0 0;
            border: none;
            border-right: 1px solid var(--ink);
            background: transparent;
            color: var(--ink);
            font-family: var(--font-mono);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            cursor: pointer;
            transition: color 0.15s;
        }

        .back-btn:hover {
            color: var(--vermillion);
        }

        .detail-title-bar {
            flex: 1;
            display: flex;
            align-items: center;
            padding: 0 1.25rem;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--ink-light);
            overflow: hidden;
        }

        .detail-title-text {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .detail-by {
            color: var(--vermillion);
            margin-left: 0.75rem;
            flex-shrink: 0;
        }

        /* Action bar */
        .action-bar {
            border-bottom: 1px solid var(--ink);
            background: var(--washi);
        }

        .action-bar-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 clamp(1.25rem, 4vw, 3rem);
            display: flex;
            align-items: stretch;
            flex-wrap: wrap;
        }

        .action-group {
            display: flex;
            align-items: stretch;
        }

        .action-group-label {
            display: flex;
            align-items: center;
            padding: 0 1rem;
            font-family: var(--font-mono);
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--ink-light);
            border-right: 1px solid var(--line);
        }

        .act-btn {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.75rem 1rem;
            border: none;
            border-right: 1px solid var(--line);
            background: transparent;
            color: var(--ink);
            font-family: var(--font-mono);
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
            text-decoration: none;
            white-space: nowrap;
        }

        .act-btn:hover {
            background: var(--ink);
            color: var(--washi);
            text-decoration: none;
        }

        .act-btn.active {
            background: var(--ink);
            color: var(--washi);
        }

        .act-btn.copy-btn {
            background: var(--vermillion);
            color: white;
            border-color: var(--vermillion);
        }

        .act-btn.copy-btn:hover {
            background: var(--ink);
        }

        .act-btn.copied {
            background: var(--ink);
            color: var(--washi);
        }

        .act-btn svg {
            width: 14px;
            height: 14px;
        }

        .action-spacer {
            flex: 1;
        }

        /* Content */
        .detail-content {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            padding: clamp(2rem, 5vw, 4rem) clamp(1.25rem, 4vw, 3rem);
        }

        .content-panel {
            opacity: 0;
            transform: translateY(6px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .content-panel.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .rendered-view.hidden {
            display: none;
        }

        .raw-view {
            display: none;
        }

        .raw-view.active {
            display: block;
        }

        .raw-editor {
            width: 100%;
            min-height: 500px;
            padding: 1.5rem;
            background: transparent;
            border: 1px solid var(--ink);
            color: var(--ink);
            font-family: var(--font-mono);
            font-size: 0.85rem;
            line-height: 1.8;
            resize: vertical;
            outline: none;
            tab-size: 2;
        }

        .raw-editor:focus {
            box-shadow: 3px 3px 0 var(--vermillion);
        }

        .raw-hint {
            margin-top: 0.75rem;
            font-family: var(--font-mono);
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--ink-light);
        }

        /* ═══════════ MARKDOWN ═══════════ */
        .md h1 {
            font-size: clamp(1.5rem, 3vw, 2.25rem);
            font-weight: 800;
            letter-spacing: -0.03em;
            line-height: 1.15;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--ink);
        }

        .md h2 {
            font-size: 1.125rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-top: 3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.625rem;
            border-bottom: 1px solid var(--line);
        }

        .md h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 0.75rem;
        }

        .md p {
            margin-bottom: 1.5rem;
            line-height: 1.85;
        }

        .md ul,
        .md ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }

        .md li {
            margin-bottom: 0.5rem;
            line-height: 1.8;
        }

        .md strong {
            font-weight: 700;
        }

        .md blockquote {
            border-left: 3px solid var(--vermillion);
            padding: 1rem 1.5rem;
            margin: 2rem 0;
            background: rgba(227, 66, 52, 0.04);
        }

        .md code {
            font-family: var(--font-mono);
            font-size: 0.8em;
            background: rgba(26, 26, 26, 0.06);
            padding: 0.15rem 0.35rem;
        }

        .md pre {
            background: var(--ink);
            color: var(--washi);
            padding: 1.5rem;
            overflow-x: auto;
            margin: 2rem 0;
        }

        .md pre code {
            background: transparent;
            padding: 0;
            color: var(--washi);
        }

        .md hr {
            border: none;
            height: 1px;
            background: var(--ink);
            margin: 2.5rem 0;
        }

        .md table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            font-size: 0.875rem;
            display: block;
            overflow-x: auto;
        }

        .md thead {
            background: var(--ink);
            color: var(--washi);
        }

        .md th {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            padding: 0.75rem 1rem;
            text-align: left;
            white-space: nowrap;
            border: 1px solid var(--ink);
        }

        .md td {
            padding: 0.625rem 1rem;
            border: 1px solid var(--line);
            line-height: 1.5;
            vertical-align: top;
        }

        .md tbody tr:hover {
            background: rgba(26, 26, 26, 0.03);
        }

        /* ═══════════ FOOTER ═══════════ */
        .page-footer {
            margin-top: auto;
            border-top: 1px solid var(--ink);
        }

        .footer-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: clamp(1.5rem, 3vw, 2.5rem) clamp(1.25rem, 4vw, 3rem);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 2rem;
            flex-wrap: wrap;
            font-family: var(--font-mono);
            font-size: 0.65rem;
            line-height: 2;
            color: var(--ink-light);
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .footer-col p {
            margin: 0;
        }

        /* ═══════════ TOAST ═══════════ */
        .toast {
            position: fixed;
            bottom: 1.5rem;
            left: 50%;
            transform: translateX(-50%) translateY(120%);
            background: var(--ink);
            color: var(--washi);
            padding: 0.625rem 1.25rem;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast .dot {
            width: 6px;
            height: 6px;
            background: var(--vermillion);
            border-radius: 50%;
        }

        /* ═══════════ RESPONSIVE ═══════════ */
        @media (max-width: 640px) {
            .card-grid {
                grid-template-columns: 1fr;
            }

            .action-bar-inner {
                flex-wrap: wrap;
            }

            .action-group {
                flex-wrap: wrap;
            }

            .action-group-label {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--line);
                padding: 0.5rem 1rem;
            }

            .act-btn {
                flex: 1;
                justify-content: center;
                min-width: 0;
            }

            .action-spacer {
                display: none;
            }

            .footer-inner {
                flex-direction: column;
                gap: 1rem;
            }

            .detail-title-bar {
                display: none;
            }
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <a class="logo" href="#" id="logo-link">
                <div class="logo-dot"></div>
                <span class="logo-text">Prompts</span>
            </a>
            <div class="header-right">
                <a href="https://sidc.ai" target="_blank" class="header-link">sidc.ai ↗</a>
                <a href="https://github.com/siddharthachaturvedi/prompts" target="_blank" class="header-link">GitHub
                    ↗</a>
            </div>
        </div>
    </header>

    <!-- Index View -->
    <div class="view active" id="index-view">
        <div class="index-hero">
            <h1 class="index-title">Prompt Library<span style="color:var(--vermillion)">.</span></h1>
            <p class="index-subtitle">Curated system prompts for Product Management, Organizational Behaviour, and
                prompt engineering. Copy, edit, or launch directly in your LLM of choice.</p>
            <div class="search-wrap">
                <svg class="search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="square">
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                </svg>
                <input type="text" class="search-input" id="search-input" placeholder="Search prompts…">
            </div>
        </div>
        <div class="card-grid" id="card-grid"></div>
    </div>

    <!-- Detail View -->
    <div class="view" id="detail-view">
        <div class="detail-nav">
            <div class="detail-nav-inner">
                <button class="back-btn" id="back-btn">← All</button>
                <div class="detail-title-bar">
                    <span class="detail-title-text" id="detail-title"></span>
                    <span class="detail-by" id="detail-by"></span>
                </div>
            </div>
        </div>
        <div class="action-bar">
            <div class="action-bar-inner">
                <div class="action-group">
                    <button class="act-btn active" id="toggle-read">Read</button>
                    <button class="act-btn" id="toggle-edit">Edit</button>
                    <button class="act-btn copy-btn" id="copy-btn">Copy</button>
                </div>
                <div class="action-spacer"></div>
                <div class="action-group">
                    <span class="action-group-label">Use in</span>
                    <a class="act-btn" id="link-chatgpt" href="#" target="_blank">ChatGPT ↗</a>
                    <a class="act-btn" id="link-claude" href="#" target="_blank">Claude ↗</a>
                    <a class="act-btn" id="link-gemini" href="#" target="_blank">Gemini ↗</a>
                </div>
            </div>
        </div>
        <div class="detail-content">
            <div class="content-panel" id="content-panel">
                <div class="rendered-view md" id="rendered-view"></div>
                <div class="raw-view" id="raw-view">
                    <textarea class="raw-editor" id="raw-editor" spellcheck="false"></textarea>
                    <p class="raw-hint">Edit above → copy or launch your customised version</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="page-footer">
        <div class="footer-inner">
            <div class="footer-col">
                <p>Built with ♥ for the students.</p>
                <p>Provided as-is, no warranty. Use, remix, adapt freely.</p>
            </div>
            <div class="footer-col">
                <p>Want to contribute? <a href="https://github.com/siddharthachaturvedi/prompts" target="_blank">Fork on
                        GitHub</a></p>
                <p>Not technical? Email me — you'd have it from Noah.</p>
                <p>— <a href="https://sidc.ai" target="_blank">Sid</a></p>
            </div>
        </div>
    </footer>

    <div class="toast" id="toast"><span class="dot"></span> Copied to clipboard</div>

    <script id="prompts-data" type="application/json">
        {{ PROMPTS_JSON }}
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let prompts = [];
            try { prompts = JSON.parse(document.getElementById('prompts-data').textContent.trim()); } catch (e) { return; }
            prompts.sort((a, b) => a.filename.localeCompare(b.filename));

            const $ = id => document.getElementById(id);
            const grid = $('card-grid');
            const indexView = $('index-view');
            const detailView = $('detail-view');
            const rendered = $('rendered-view');
            const rawView = $('raw-view');
            const editor = $('raw-editor');
            const panel = $('content-panel');
            const titleEl = $('detail-title');
            const byEl = $('detail-by');
            const copyBtn = $('copy-btn');
            const toggleRead = $('toggle-read');
            const toggleEdit = $('toggle-edit');
            const search = $('search-input');
            const toast = $('toast');
            const linkChatGPT = $('link-chatgpt');
            const linkClaude = $('link-claude');
            const linkGemini = $('link-gemini');

            let active = null, rawMode = false;

            // Build cards
            prompts.forEach(p => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.filename = p.filename;

                const num = (p.filename.match(/^(\d+)/) || ['', ''])[1];
                const cleanTitle = p.title.replace(/^\d+\s*[-–—]\s*/, '');
                const preview = p.content.split('\n').filter(l => l.trim() && !l.startsWith('#'))[0] || '';

                card.innerHTML = `
                <div class="card-top">
                    <div class="card-number">${num}</div>
                    ${p.by ? `<div class="card-by">by ${p.by}</div>` : ''}
                </div>
                <div class="card-title">${cleanTitle}</div>
                <div class="card-preview">${preview.replace(/\*\*/g, '').replace(/\*/g, '')}</div>
                <div class="card-arrow">Read →</div>
            `;
                card.addEventListener('click', () => showDetail(p));
                grid.appendChild(card);
            });

            function showDetail(p) {
                active = p;
                rawMode = false;
                setMode(false);

                titleEl.textContent = p.title;
                byEl.textContent = p.by ? `● ${p.by}` : '';

                panel.classList.remove('visible');
                indexView.classList.remove('active');
                detailView.classList.add('active');
                window.scrollTo(0, 0);

                setTimeout(() => {
                    rendered.innerHTML = marked.parse(p.content);
                    editor.value = p.content;
                    fitEditor();
                    panel.classList.add('visible');
                }, 50);

                // Set LLM launch links
                const text = encodeURIComponent(p.content);
                linkChatGPT.href = `https://chatgpt.com/?q=${text}`;
                linkClaude.href = `https://claude.ai/new?q=${text}`;
                linkGemini.href = `https://gemini.google.com/app?text=${text}`;

                // Update URL hash
                history.pushState(null, '', `#${p.filename.replace('.md', '')}`);
            }

            function showIndex() {
                detailView.classList.remove('active');
                indexView.classList.add('active');
                active = null;
                history.pushState(null, '', location.pathname);
                window.scrollTo(0, 0);
            }

            $('back-btn').addEventListener('click', showIndex);
            $('logo-link').addEventListener('click', e => { e.preventDefault(); showIndex(); });

            function fitEditor() {
                editor.style.height = 'auto';
                editor.style.height = Math.max(350, editor.scrollHeight + 20) + 'px';
            }
            editor.addEventListener('input', () => {
                fitEditor();
                // Update launch links with edited content
                if (active) {
                    const text = encodeURIComponent(editor.value);
                    linkChatGPT.href = `https://chatgpt.com/?q=${text}`;
                    linkClaude.href = `https://claude.ai/new?q=${text}`;
                    linkGemini.href = `https://gemini.google.com/app?text=${text}`;
                }
            });

            function setMode(raw) {
                rawMode = raw;
                toggleRead.classList.toggle('active', !raw);
                toggleEdit.classList.toggle('active', raw);
                rendered.classList.toggle('hidden', raw);
                rawView.classList.toggle('active', raw);
                if (raw) fitEditor();
            }
            toggleRead.addEventListener('click', () => setMode(false));
            toggleEdit.addEventListener('click', () => setMode(true));

            copyBtn.addEventListener('click', () => {
                if (!active) return;
                navigator.clipboard.writeText(rawMode ? editor.value : active.content).then(() => {
                    copyBtn.textContent = '✓ Copied';
                    copyBtn.classList.add('copied');
                    toast.classList.add('show');
                    setTimeout(() => toast.classList.remove('show'), 2000);
                    setTimeout(() => { copyBtn.textContent = 'Copy'; copyBtn.classList.remove('copied'); }, 2200);
                });
            });

            search.addEventListener('input', () => {
                const q = search.value.toLowerCase();
                grid.querySelectorAll('.card').forEach(card => {
                    const t = card.querySelector('.card-title').textContent.toLowerCase();
                    card.style.display = (q && !t.includes(q)) ? 'none' : '';
                });
                const visible = grid.querySelectorAll('.card:not([style*="display: none"])');
                const existing = grid.querySelector('.no-results');
                if (visible.length === 0 && !existing) {
                    const nr = document.createElement('div');
                    nr.className = 'no-results';
                    nr.textContent = 'No prompts match your search';
                    grid.appendChild(nr);
                } else if (visible.length > 0 && existing) {
                    existing.remove();
                }
            });

            document.addEventListener('keydown', e => {
                if ((e.metaKey || e.ctrlKey) && e.key === 'k') { e.preventDefault(); search.focus(); showIndex(); }
            });

            // Handle direct link via hash
            const hash = location.hash.replace('#', '');
            if (hash) {
                const match = prompts.find(p => p.filename.replace('.md', '') === hash);
                if (match) showDetail(match);
            }

            // Handle back button
            window.addEventListener('popstate', () => {
                const h = location.hash.replace('#', '');
                if (h) {
                    const m = prompts.find(p => p.filename.replace('.md', '') === h);
                    if (m) showDetail(m);
                } else {
                    showIndex();
                }
            });
        });
    </script>
</body>

</html>